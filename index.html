<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Guante Blanco</title>

  <!-- Fuentes Cinzel y Cinzel Decorative -->
  <link href="https://fonts.googleapis.com/css2?family=Cinzel&family=Cinzel+Decorative&display=swap" rel="stylesheet">

  <!-- CSS -->
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- MENÚ SUPERIOR -->
  <header class="header" id="header">
    <nav class="nav">
      <ul>
        <li><a href="#hero">Inicio</a></li>
        <li><a href="#servicios">Servicios</a></li>
        <li><a href="#localizacion">Localización</a></li>
        <li><a href="#ofertas">Ofertas</a></li>
        <li><a href="#agenda">Agenda</a></li>
        <li><a href="#contacto">Contacto</a></li>
      </ul>
    </nav>
  </header>

  <!-- HERO FULLSCREEN -->
  <section class="hero fade-slide" id="hero">
    <img src="images/logo.png" alt="Logo Guante Blanco" class="logo-hero">
  </section>

  <!-- TEXTO DE PRESENTACIÓN -->
  <section class="presentacion fade-slide">
    <p>cuida de lo que te mueve</p>
  </section>

  <!-- CONTENIDO PRINCIPAL -->
  <div class="main-content">

    <!-- SECCIÓN SERVICIOS -->
    <section class="servicios fade-slide" id="servicios">
      <h2>SERVICIOS</h2>
      <img src="images/services.png" alt="Listado de servicios de limpieza de coches" class="imagen-seccion hover-zoom">
    </section>

    <!-- SECCIÓN LOCALIZACIÓN -->
    <section class="localizacion fade-slide" id="localizacion">
      <h2>LOCALIZACIÓN</h2>
      <img src="images/mapa.png" alt="Mapa de localización" class="imagen-seccion mapa">
    </section>

    <!-- SECCIÓN OFERTAS -->
    <section class="ofertas fade-slide" id="ofertas">
      <h2>OFERTAS VIGENTES</h2>
      <img src="images/offers.png" alt="Ofertas vigentes" class="imagen-seccion hover-zoom">
    </section>

    <!-- SECCIÓN AGENDA -->
    <section class="agenda fade-slide" id="agenda">
      <h2>AGENDA UNA CITA</h2>

      <!-- FORMULARIO PEDIR CITA -->
      <div class="form-toggle">
        <button class="toggle-btn">Pedir una cita</button>
        <form class="toggle-form" id="form-cita" action="https://formsubmit.co/ae11fd4ef1d5609b19290bf8958a1ba1" method="POST">
          <input type="hidden" name="_captcha" value="false">
          <input type="hidden" name="_subject" value="Nueva solicitud de cita">
          <input type="hidden" name="_template" value="table">

          <input type="text" name="nombre" placeholder="Nombre y apellidos" required>
          <input type="email" name="email" placeholder="Correo electrónico" required>
          <input type="tel" name="telefono" placeholder="Número de teléfono" required>
          <input type="text" name="modelo" placeholder="Modelo de vehículo" required>
          <input type="text" name="direccion" placeholder="Dirección donde se realizará el servicio" required>
          
          <label for="fecha">Selecciona la fecha deseada:</label>
          <input type="date" name="fecha" id="fecha" required>

          <fieldset>
            <legend>Turno preferente</legend>
            <label><input type="radio" name="turno" value="Mañana" required> Mañana</label><br>
            <label><input type="radio" name="turno" value="Tarde"> Tarde</label><br>
            <label><input type="radio" name="turno" value="Especificado en mensaje"> Especificado en mensaje</label>
          </fieldset>

          <fieldset>
            <legend>Servicios solicitados</legend>
            <label><input type="checkbox" name="servicios[]" value="Exterior básico"> Exterior básico</label><br>
            <label><input type="checkbox" name="servicios[]" value="Interior básico"> Interior básico</label><br>
            <label><input type="checkbox" name="servicios[]" value="Pack básico"> Pack básico</label><br>
            <label><input type="checkbox" name="servicios[]" value="Desodorización/ozono"> Desodorización/ozono</label><br>
            <label><input type="checkbox" name="servicios[]" value="Tratamiento plásticos exteriores"> Tratamiento plásticos exteriores</label><br>
            <label><input type="checkbox" name="servicios[]" value="Restauración de faros"> Restauración de faros</label><br>
            <label><input type="checkbox" name="servicios[]" value="Tapicerías profundo"> Tapicerías profundo</label><br>
            <label><input type="checkbox" name="servicios[]" value="Revitalización de cuero"> Revitalización de cuero</label>
          </fieldset>

          <p>Si deseas usar alguna de las ofertas vigentes, especifícamelo en el mensaje.</p>
          <textarea name="mensaje" rows="4" placeholder="Mensaje adicional (opcional)"></textarea>
          <button type="submit">Pedir una cita</button>
          <p class="mensaje-exito" id="mensaje-cita">El correo ha sido enviado y puesto en cola de revisión, le responderemos lo antes posible.</p>
        </form>
      </div>

      <!-- CALENDARIO DINÁMICO -->
      <div id="calendario-container">
        <div id="calendario"></div>
      </div>
    </section>

    <!-- SECCIÓN CONTACTO -->
    <section class="contacto fade-slide" id="contacto">
      <h2>CONTACTO</h2>
      <div class="form-toggle">
        <button class="toggle-btn">Vía e-mail</button>
        <form class="toggle-form" id="form-contacto" action="https://formsubmit.co/c7e333301c7758a6d44f87a1eac2cc9d" method="POST">
          <input type="hidden" name="_captcha" value="false">
          <input type="hidden" name="_subject" value="Nuevo mensaje de contacto">
          <input type="hidden" name="_template" value="table">

          <input type="text" name="nombre" placeholder="Nombre y apellidos" required>
          <input type="email" name="email" placeholder="Correo electrónico" required>
          <textarea name="mensaje" rows="4" placeholder="Mensaje"></textarea>
          <button type="submit">Enviar</button>
          <p class="mensaje-exito" id="mensaje-contacto">El correo ha sido enviado y puesto en cola de revisión, le responderemos lo antes posible.</p>
        </form>
      </div>
      <p class="redes">
        <a href="https://www.instagram.com/guanteblancoofficial/" target="_blank">Instagram</a> |
        <a href="https://wa.me/34636695321" target="_blank">WhatsApp</a> |
        <a href="tel:+34636695321">Llamar</a>
      </p>
    </section>

  </div>

  <!-- BOTÓN SUBIR -->
  <button id="scrollTopBtn" title="Volver arriba">↑</button>

  <!-- SCRIPT PARA FORMULARIOS, ANIMACIONES Y CALENDARIO -->
  <script>
    // Formularios plegables
    const toggleButtons = document.querySelectorAll('.toggle-btn');
    toggleButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        const form = btn.nextElementSibling;
        form.classList.toggle('active');
        btn.textContent = form.classList.contains('active')
          ? 'Cerrar'
          : btn.closest('.agenda') ? 'Pedir una cita' : 'Vía e-mail';
      });
    });

    // Fade y slide al hacer scroll
    const faders = document.querySelectorAll('.fade-slide');
    const observer = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        if(entry.isIntersecting) {
          entry.target.classList.add('visible');
          observer.unobserve(entry.target);
        }
      });
    }, { threshold: 0.1 });
    faders.forEach(f => observer.observe(f));

    // Mensaje de éxito sin recargar
    function manejarFormulario(formId, mensajeId) {
      const form = document.getElementById(formId);
      const mensaje = document.getElementById(mensajeId);

      form.addEventListener('submit', e => {
        e.preventDefault();
        fetch(form.action, { method: 'POST', body: new FormData(form) })
        .then(() => {
          mensaje.classList.add('visible');
          form.reset();
          setTimeout(() => mensaje.classList.remove('visible'), 5000);
        })
        .catch(() => {
          alert('Hubo un error al enviar el formulario. Inténtalo de nuevo más tarde.');
        });
      });
    }

    manejarFormulario('form-cita', 'mensaje-cita');
    manejarFormulario('form-contacto', 'mensaje-contacto');

    // --- CALENDARIO DINÁMICO ---
    const diasOcupados = {
      "2025-10-14": "lleno",
      "2025-10-15": "lleno",
      "2025-10-16": "lleno",
      "2025-10-17": "lleno",
      "2025-10-18": "lleno",
      "2025-10-19": "lleno",
      "2025-10-20": "lleno",
      "2025-10-21": "lleno",
      "2025-10-22": "lleno",
      "2025-10-30": "lleno",
      "2025-11-05": "lleno"
    };

    function generarCalendario() {
      const calendario = document.getElementById('calendario');
      calendario.innerHTML = '';
      const hoy = new Date();
      const meses = [hoy.getMonth(), hoy.getMonth()+1];

      meses.forEach((mesIndex, i) => {
        const fecha = new Date(hoy.getFullYear(), mesIndex, 1);
        const mes = fecha.toLocaleString('es-ES', { month: 'long' });
        const año = fecha.getFullYear();

        const titulo = document.createElement('div');
        titulo.className = 'mes-calendario';
        titulo.textContent = `${mes.toUpperCase()} ${año}`;
        calendario.appendChild(titulo);

        const diasSemana = ['L','M','X','J','V','S','D'];
        diasSemana.forEach(d => {
          const diaSemana = document.createElement('div');
          diaSemana.className = 'dia dia-semana';
          diaSemana.textContent = d;
          calendario.appendChild(diaSemana);
        });

        const primerDia = fecha.getDay() === 0 ? 6 : fecha.getDay()-1;
        for(let i=0;i<primerDia;i++){
          const blank = document.createElement('div');
          blank.className = 'dia';
          calendario.appendChild(blank);
        }

        const ultimoDia = new Date(año, mesIndex+1, 0).getDate();
        for(let d=1; d<=ultimoDia; d++){
          const diaDiv = document.createElement('div');
          diaDiv.className = 'dia';
          const fechaStr = `${año}-${String(mesIndex+1).padStart(2,'0')}-${String(d).padStart(2,'0')}`;
          diaDiv.textContent = d;

          const fechaDia = new Date(año, mesIndex, d);
          if(fechaDia < hoy) diaDiv.classList.add('ayer');
          if(diasOcupados[fechaStr] && fechaDia >= hoy) diaDiv.classList.add('lleno');

          calendario.appendChild(diaDiv);
        }

        if (i === 0) {
          const espacio = document.createElement('div');
          espacio.className = 'espacio-entre-meses';
          calendario.appendChild(espacio);
        }
      });
    }

    generarCalendario();

    // SCROLL SUAVE MENÚ
    document.querySelectorAll('.nav a').forEach(link => {
      link.addEventListener('click', e => {
        e.preventDefault();
        const target = document.querySelector(link.getAttribute('href'));
        target.scrollIntoView({ behavior: 'smooth' });
      });
    });

    // MENÚ FIJO AL HACER SCROLL
    const header = document.getElementById('header');
    const heroHeight = document.querySelector('.hero').offsetHeight;
    window.addEventListener('scroll', () => {
      if(window.scrollY > heroHeight - 10) {
        header.classList.add('visible');
      } else {
        header.classList.remove('visible');
      }

      // Botón subir
      const btn = document.getElementById('scrollTopBtn');
      if(window.scrollY > 300){
        btn.style.display = 'block';
      } else {
        btn.style.display = 'none';
      }
    });

    // BOTÓN SUBIR
    document.getElementById('scrollTopBtn').addEventListener('click', () => {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });
  </script>
</body>
</html>
